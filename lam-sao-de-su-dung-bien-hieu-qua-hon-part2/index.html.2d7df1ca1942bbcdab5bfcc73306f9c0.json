{"head":{"id":6936,"layout":"Post","route":"lam-sao-de-su-dung-bien-hieu-qua-hon-part2","title":"LÃ m sao Ä‘á»ƒ sá»­ dá»¥ng biáº¿n hiá»‡u quáº£ hÆ¡n (part2)","tags":["coding-style"],"date":"2015-05-06T03:16:39.897Z","author":{"username":"thanhmssl10","avatar":"/user_avatar/daynhauhoc.com/thanhmssl10/{size}/2345_1.png"},"description":"BÃ i [viáº¿t trÆ°á»›c][1] mÃ¬nh Ä‘Ã£ nÃ³i vá» cÃ¡ch khai bÃ¡o biáº¿n vÃ  khá»Ÿi táº¡o biáº¿n vÃ  bÃ i viáº¿t nÃ y sáº½ nÃ³i vá» cÃ¡ch chá»n pháº¡m vi biáº¿n sao cho code hiá»‡uâ€¦"},"body":"<p>BÃ i <a href=\"http://daynhauhoc.com/t/lam-sao-de-su-dung-bien-hieu-qua-hon-part1/6921\">viáº¿t trÆ°á»›c</a> mÃ¬nh Ä‘Ã£ nÃ³i vá» cÃ¡ch khai bÃ¡o biáº¿n vÃ  khá»Ÿi táº¡o biáº¿n vÃ  bÃ i viáº¿t nÃ y sáº½ nÃ³i vá» cÃ¡ch chá»n pháº¡m vi biáº¿n sao cho code hiá»‡u quáº£, dá»… Ä‘á»c, dá»… hiá»ƒu vÃ  táº¥t nhiÃªn lÃ  dá»… debug ğŸ˜Š</p>\n<h1 id=\"part2-phm-vi-bin-scope\"><a href=\"http://daynhauhoc.com/#part2-phm-vi-bin-scope\" class=\"statinamic-HeadingAnchor\">#</a>Part2: Pháº¡m vi biáº¿n (Scope)</h1>\n<hr>\n<div align=center><img src='http://daynhauhoc.com/uploads/default/2986/5e46151fe3050079.png' width=\"500\" height=\"429\"> <br></div>\n<h2 id=\"hy--tham-chiu-reference--n-cc-bin-gn-nhau\"><a href=\"http://daynhauhoc.com/#hy--tham-chiu-reference--n-cc-bin-gn-nhau\" class=\"statinamic-HeadingAnchor\">#</a>HÃ£y Ä‘á»ƒ tham chiáº¿u (reference)  Ä‘áº¿n cÃ¡c biáº¿n gáº§n nhau</h2>\n<p>CÃ³ má»™t phÆ°Æ¡ng phÃ¡p Ä‘á»ƒ tÃ­nh toÃ¡n má»©c Ä‘á»™ gáº§n nhau cá»§a cÃ¡c tham chiáº¿u/lá»i gá»i biáº¿n Ä‘Ã³ lÃ  Æ°á»›c tÃ­nh sá»‘ span cá»§a biáº¿n . ÄÃ¢y lÃ  vÃ­ dá»¥ vá» sá»‘ span:</p>\n<pre><code>a=0;  &lt;--- Tham chiáº¿u Ä‘áº¿n a láº§n 1\nb=0; &lt;--- Tham chiáº¿u Ä‘áº¿n b láº§n 1\nc=0;&lt;--- Tham chiáº¿u Ä‘áº¿n c láº§n 1\na= b + c;  &lt;--- Tham chiáº¿u Ä‘áº¿n a láº§n 2, Tham chiáº¿u Ä‘áº¿n b láº§n 2, Tham chiáº¿u Ä‘áº¿n c láº§n 2\n</code></pre>\n<p>Trong trÆ°á»ng há»£p nÃ y, cÃ³ 2 dÃ²ng náº±m giá»¯a tham chiáº¿u Ä‘áº¿n biáº¿n <code>a</code> thá»© nháº¥t vÃ  thá»© hai, váº­y <code>a</code> cÃ³ sá»‘ span lÃ  2, tÆ°Æ¡ng tá»± ta cÃ³ sá»‘ span cá»§a b vÃ  c láº§n lÆ°á»£t lÃ  1 vÃ  0. VÃ  Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ khÃ¡c</p>\n<pre><code>a = 0;\nb = 0;\nc = 0;\nb = a + 1;\nb = b / c;\n</code></pre>\n<p>Trong trÆ°á»ng há»£p nÃ y, cÃ³ 1 dÃ²ng giá»¯a tham chiáº¿u Ä‘áº¿n <code>b</code> thá»© nháº¥t vÃ  thá»© hai nÃªn nÃ³ cÃ³ span lÃ  1. VÃ  khÃ´ng cÃ³ dÃ²ng nÃ o giá»¯a tham chiáº¿u thá»© hai vÃ  tham chiáº¿u thá»© ba, váº­y cÃ³ span lÃ  0.</p>\n<p>Sá»‘ span trung bÃ¬nh Ä‘Æ°á»£c tÃ­nh toÃ¡n dá»±a trÃªn nhá»¯ng span riÃªng láº». Trong vÃ­ dá»¥ 2, vá»›i b, (1+0)/2 = 0.5, váº­y sá»‘ span trung bÃ¬nh cá»§a b lÃ  0.5. Khi mÃ  báº¡n giá»¯ cÃ¡c tham chiáº¿u Ä‘áº¿n biáº¿n gáº§n nhau, báº¡n cÃ³ thá»ƒ giÃºp ngÆ°á»i Ä‘á»c code cá»§a báº¡n táº­p trung vÃ o má»™t pháº§n cá»§a code, cÃ²n  náº¿u báº¡n gá»i biáº¿n cÃ¡ch xa nhau, báº¡n sáº½ báº¯t ngÆ°á»i Ä‘á»c lá»¥c tung cáº£ chÆ°Æ¡ng trÃ¬nh. VÃ¬ tháº¿ lá»£i Ã­ch chÃ­nh cá»§a viá»‡c sáº¯p xáº¿p biáº¿n gáº§n nhau lÃ  tÄƒng kháº£ nÄƒng Ä‘á»c code rÃµ rÃ ng vÃ  dá»… hiá»ƒu hÆ¡n.</p>\n<h2 id=\"hy-gi-cho-bin-sng-trong-thi-gian-t-nht-c-th\"><a href=\"http://daynhauhoc.com/#hy-gi-cho-bin-sng-trong-thi-gian-t-nht-c-th\" class=\"statinamic-HeadingAnchor\">#</a>HÃ£y giá»¯ cho biáº¿n &quot;sá»‘ng&quot; trong thá»i gian Ã­t nháº¥t cÃ³ thá»ƒ</h2>\n<p>á» Ä‘Ã¢y ta cÃ³ thÃªm má»™t khÃ¡i niá»‡m ná»¯a lÃ  &quot;live time&quot; lÃ  tá»•ng sá»‘ dÃ²ng lá»‡nh mÃ  biáº¿n Ä‘Æ°á»£c sá»­ dá»¥ng. Biáº¿n tá»“n táº¡i tá»« dÃ²ng lá»‡nh Ä‘áº§u tiÃªn mÃ  nÃ³ Ä‘Æ°á»£c gá»i Ä‘áº¿n vÃ  nÃ³ káº¿t thÃºc á»Ÿ dÃ²ng lá»‡nh cuá»‘i cÃ¹ng mÃ  nÃ³ Ä‘Æ°á»£c gá»i Ä‘áº¿n.</p>\n<p>KhÃ´ng giá»‘ng nhÆ° span, live time cá»§a biáº¿n khÃ´ng bá»‹ áº£nh hÆ°á»Ÿng bá»Ÿi sá»‘ láº§n biáº¿n Ä‘Æ°á»£c sá»­ dá»¥ng tá»« láº§n Ä‘áº§u tá»›i láº§n cuá»‘i mÃ  biáº¿n Ä‘Æ°á»£c gá»i Ä‘áº¿n. Náº¿u biáº¿n Ä‘Æ°á»£c gá»i láº§n Ä‘áº§u tiÃªn á»Ÿ dÃ²ng 1 vÃ  láº§n cuá»‘i cÃ¹ng á»Ÿ dÃ²ng 25 thÃ¬ nÃ³ sáº½ tá»“n táº¡i trong 25 dÃ²ng lá»‡nh. Náº¿u chá»‰ cÃ³ 2 dÃ²ng trong Ä‘Ã³ biáº¿n Ä‘Æ°á»£c sá»­ dá»¥ng thÃ¬ nÃ³ cÃ³ span trung bÃ¬nh lÃ  23 dÃ²ng lá»‡nh. Náº¿u biáº¿n Ä‘Ã£ Ä‘Æ°á»£c dÃ¹ng á»Ÿ má»—i dÃ²ng tá»« dÃ²ng 1 Ä‘áº¿n 25, nÃ³ sáº½ cÃ³ sá»‘ span trung bÃ¬nh lÃ  0 dÃ²ng lá»‡nh, nhÆ°ng nÃ³ váº¥n sáº½ cÃ³ live time lÃ  25 dÃ²ng lá»‡nh. HÃ¬nh 10-1 minh há»a cáº£ 2 thÃ´ng sá»‘ span vÃ  live time.</p>\n<div align=center><img src=\"http://daynhauhoc.com/uploads/default/2982/f2e568955025434a.jpg\" width=\"500\" height=\"429\"> <br> <br>\"Live time\" thá»ƒ hiá»‡n tuá»•i thá» cá»§a biáº¿n, \"Span\"  lÃ  sá»‘ \"bÆ°á»›c\" nÃ³ thá»ƒ hiá»‡n Ä‘á»™ gáº§n nhau cá»§a cÃ¡ch tham chiáº¿u Ä‘áº¿n biáº¿n <br></div>\n<p>TÃ³m láº¡i, cÅ©ng nhÆ° vá»›i span, má»¥c tiÃªu cáº§n quan tÃ¢m vá»›i live time Ä‘Ã³ lÃ  giá»¯ con sá»‘ Ä‘Ã³ NHá»,  tá»©c lÃ  hÃ£y lÃ m cho biáº¿n &quot;cháº¿t sá»›m&quot; nháº¥t cÃ³ thá»ƒ.</p>\n<h2 id=\"tnh-ton-thi-gian-tn-ti-ca-bin\"><a href=\"http://daynhauhoc.com/#tnh-ton-thi-gian-tn-ti-ca-bin\" class=\"statinamic-HeadingAnchor\">#</a>TÃ­nh toÃ¡n thá»i gian tá»“n táº¡i cá»§a biáº¿n</h2>\n<p>Báº¡n cÃ³ thá»ƒ tÃ­nh live time cá»§a biáº¿n báº±ng cÃ¡ch Ä‘áº¿m sá»‘ dÃ²ng giá»¯a láº§n Ä‘áº§u vÃ  láº§n cuá»‘i gá»i biáº¿n (bao gá»“m cáº£ láº§n Ä‘áº§u vÃ  láº§n cuá»‘i). ÄÃ¢y lÃ  vÃ­ dá»¥ khi Ä‘á»ƒ  biáº¿n &quot;sá»‘ng quÃ¡ dai&quot;.</p>\n<pre><code class=\"hljs language-java\"><span class=\"hljs-number\">1</span> <span class=\"hljs-comment\">// khá»Ÿi táº¡o táº¥t cáº£ cÃ¡c biáº¿n</span>\n<span class=\"hljs-number\">2</span> recordIndex= <span class=\"hljs-number\">0</span>;\n<span class=\"hljs-number\">3</span> total = <span class=\"hljs-number\">0</span>;\n<span class=\"hljs-number\">4</span> done = <span class=\"hljs-keyword\">false</span>;\n    ...\n<span class=\"hljs-number\">26</span> <span class=\"hljs-keyword\">while</span> ( recordIndex &lt; recordCount ) {\n<span class=\"hljs-number\">27</span> ...\n<span class=\"hljs-number\">28</span> recordIndex = recordIndex +<span class=\"hljs-number\">1</span>;    **&lt;--<span class=\"hljs-number\">1</span>**\n    ...\n<span class=\"hljs-number\">64</span> <span class=\"hljs-keyword\">while</span> (!done) {\n    ...\n<span class=\"hljs-number\">69</span> <span class=\"hljs-keyword\">if</span> ( total &gt; projectedTotal ) {         **&lt;--<span class=\"hljs-number\">2</span>**\n<span class=\"hljs-number\">70</span>     done=<span class=\"hljs-keyword\">true</span>;            **&lt;--<span class=\"hljs-number\">3</span>**\n(<span class=\"hljs-number\">1</span>) láº§n cuá»‘i gá»i recordIndex.\n(<span class=\"hljs-number\">2</span>) láº§n cuá»‘i gá»i total.\n(<span class=\"hljs-number\">3</span>) láº§n cuá»‘i gá»i done.</code></pre>\n<p>ÄÃ¢y lÃ  live time cá»§a 3 biáº¿n trong vÃ­ dá»¥ nÃ y:</p>\n<ul>\n<li>recordIndex: ( line 28 - line 2 + 1 ) = 27 </li>\n<li>total:  ( line 69 - line 3 + 1 ) = 67 </li>\n<li>done: ( line 70 - line 4 + 1 ) = 67</li>\n<li>Live Time trung bÃ¬nh: ( 27 + 67 + 67 ) / 3 â‰ˆ 54</li>\n</ul>\n<p>CÃ²n Ä‘Ã¢y lÃ  báº£n sá»­a láº¡i:</p>\n<pre><code class=\"hljs language-java\">...\n<span class=\"hljs-number\">25</span>  recordIndex = <span class=\"hljs-number\">0</span>;       &lt;-- <span class=\"hljs-number\">1</span>\n<span class=\"hljs-number\">26</span>  <span class=\"hljs-keyword\">while</span> ( recordIndex &lt; recordCount ) {\n<span class=\"hljs-number\">27</span>  ...\n<span class=\"hljs-number\">28</span>     recordIndex = recordIndex + <span class=\"hljs-number\">1</span>;\n       ...\n<span class=\"hljs-number\">62</span>  total = <span class=\"hljs-number\">0</span>;       &lt;-- <span class=\"hljs-number\">2</span>\n<span class=\"hljs-number\">63</span>  done = <span class=\"hljs-keyword\">false</span>;       &lt;-- <span class=\"hljs-number\">2</span>\n<span class=\"hljs-number\">64</span>  <span class=\"hljs-keyword\">while</span> ( !done ) {\n       ...\n<span class=\"hljs-number\">69</span>     <span class=\"hljs-keyword\">if</span> ( total &gt; projectedTotal ) {\n<span class=\"hljs-number\">70</span>        done = <span class=\"hljs-keyword\">true</span>;\n(<span class=\"hljs-number\">1</span>)Khá»Ÿi táº¡o recordIndex Ä‘Æ°á»£c chuyá»ƒn xuá»‘ng tá»« dÃ²ng <span class=\"hljs-number\">3</span>.\n(<span class=\"hljs-number\">2</span>)Khá»Ÿi táº¡o total vÃ  done Ä‘Æ°á»£c chuyá»ƒn xuá»‘ng tá»« dÃ²ng <span class=\"hljs-number\">4</span> and <span class=\"hljs-number\">5</span></code></pre>\n<p>ÄÃ¢y lÃ  thá»i gian tá»“n táº¡i cá»§a biáº¿n trong vÃ­ dá»¥:</p>\n<ul>\n<li>recordIndex: ( line 28 - line 25 + 1 ) = 4 </li>\n<li>total: ( line 69 - line 62 + 1 ) = 8 </li>\n<li>done :  ( line 70 - line 63 + 1 ) = 8</li>\n<li>Live Time trung bÃ¬nh: ( 4 + 4+ 8 ) / 3 â‰ˆ 7</li>\n</ul>\n<p>NhÆ° Ä‘Ã£ tháº¥y, vÃ­ dá»¥ thá»© 2 tá»‘t hÆ¡n vÃ­ dá»¥ thá»© nháº¥t bá»Ÿi khá»Ÿi táº¡o biáº¿n Ä‘Æ°á»£c biá»ƒu diá»…n gáº§n nhau á»Ÿ nÆ¡i biáº¿n Ä‘Æ°á»£c sá»­ dá»¥ng. Sá»± khÃ¡c nhau cá»§a hai live time trung bÃ¬nh tháº­t sá»± ráº¥t Ä‘Ã¡ng chÃº Ã½: 54 vÃ  7</p>\n<p>Má»™t con sá»‘ lÃ m nÃªn sá»± khÃ¡c biá»‡t code tá»‘t vÃ  khÃ´ng tá»‘t? Máº·c dÃ¹ cÃ¡c nhÃ  nghiÃªn cá»©u chÆ°a cÃ³ con sá»‘ nÃ o chÃ­nh xÃ¡c nhÆ°ng hoÃ n toÃ n cÃ³ thá»ƒ tin ráº±ng: live time vá»›i span cÃ ng nhá» thÃ¬ cÃ ng tá»‘t.</p>\n<p>Náº¿u báº¡n thá»­ cÃ³ Ã¡p dá»¥ng khÃ¡i niá»‡m span vÃ  live time vÃ o biáº¿n toÃ n cá»¥c thÃ¬ báº¡n sáº½ Ä‘Æ°á»£c con sá»‘ ráº¥t lá»›n, Ä‘Ã¢y lÃ  má»™t trong nhiá»u lÃ­ do ta nÃªn trÃ¡nh dÃ¹ng biáº¿n toÃ n cá»¥c khi cÃ³ thá»ƒ dÃ¹ng biáº¿n cá»¥c bá»™.</p>\n<h1 id=\"mt-s-th-thut-lm-nh-a-bn-ca-bin\"><a href=\"http://daynhauhoc.com/#mt-s-th-thut-lm-nh-a-bn-ca-bin\" class=\"statinamic-HeadingAnchor\">#</a>Má»™t sá»‘ thá»§ thuáº­t lÃ m nhá» &quot;Ä‘á»‹a bÃ n&quot; cá»§a biáº¿n</h1>\n<p>ÄÃ¢y lÃ  má»™t sá»‘ thá»§ thuáº­t Ä‘áº·c biá»‡t Ä‘á»ƒ giÃºp báº¡n thu gá»n táº§m hoáº¡t Ä‘á»™ng cá»§a biáº¿n láº¡i:</p>\n<p><strong>Khá»Ÿi táº¡o biáº¿n Ä‘Æ°á»£c dÃ¹ng trong vÃ²ng láº·p ngay trÆ°á»›c vÃ²ng láº·p Ä‘Ã³ chá»© Ä‘á»«ng Ä‘áº·t á»Ÿ Ä‘áº§u hÃ m chá»©a vÃ²ng láº·p Ä‘Ã³</strong>. Viá»‡c nÃ y sáº½ cÃ³ Ã­ch khi báº¡n sá»­a Ä‘á»•i vÃ²ng láº·p, báº¡n sáº½ nhá»› pháº£i thay Ä‘á»•i cáº£ cÃ¡c khá»Ÿi táº¡o vÃ²ng láº·p.</p>\n<p><strong>Chá»‰ gÃ¡n giÃ¡ trá»‹ cho biáº¿n khi nÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng.</strong>  Náº¿u gÃ¡n bá»«a bÃ£i sau nÃ y báº¡n sáº½ gáº·p khÃ³ khÄƒn khi Ä‘á»c code.</p>\n<p><strong>NhÃ³m nhá»¯ng cÃ¢u lá»‡nh liÃªn quan láº¡i vá»›i nhau</strong>. CÃ¡c vÃ­ dá»¥ sau sáº½ minh hoáº¡ viá»‡c nhÃ³m cÃ¡c tham chiáº¿u Ä‘áº¿n cÃ¡c biáº¿n láº¡i vá»›i nhau lÃ m cho chÃºng dá»… tÃ¬m tháº¥y hÆ¡n. Äáº§u tiÃªn lÃ  vÃ­ dá»¥ cá»§a viá»‡c vi pháº¡m nguyÃªn táº¯c nÃ y:</p>\n<pre><code class=\"hljs language-c\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">SummarizeData</span><span class=\"hljs-params\">(...)</span> </span>{\n   ...\n   GetOldData( oldData, &amp;numOldData );      **&lt;-- <span class=\"hljs-number\">1</span>**\n   GetNewData( newData, &amp;numNewData );         |\n   totalOldData = Sum( oldData, numOldData );  |\n   totalNewData = Sum( newData, numNewData );  |\n   PrintOldDataSummary( oldData, totalOldData, numOldData );\n   PrintNewDataSummary( newData, totalNewData, numNewData );\n   SaveOldDataSummary( totalOldData, numOldData );\n   SaveNewDataSummary( totalNewData, numNewData );       **&lt;-- <span class=\"hljs-number\">1</span>**\n   ...\n}\n\n(<span class=\"hljs-number\">1</span>)CÃ¡c cÃ¢u lá»‡nh sá»­ dá»¥ng <span class=\"hljs-number\">2</span> táº­p há»£p biáº¿n</code></pre>\n<p>Trong vÃ­ dá»¥ nÃ y, báº¡n nÃ©m cÃ¡c biáº¿n oldData, newData, numOldData, numNewData, totalOldData vÃ o má»™t block. VÃ­ dá»¥ sau sáº½ Ä‘á»ƒ 3 biáº¿n trong má»™t block:</p>\n<pre><code class=\"hljs language-c\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">SummarizeData</span><span class=\"hljs-params\">( ... )</span> </span>{\n   GetOldData( oldData, &amp;numOldData );       &lt;-- <span class=\"hljs-number\">1</span>\n   totalOldData = Sum( oldData, numOldData );  |\n   PrintOldDataSummary( oldData, totalOldData, numOldData );\n   SaveOldDataSummary( totalOldData, numOldData );       &lt;-- <span class=\"hljs-number\">1</span>\n   ...\n   GetNewData( newData, &amp;numNewData );       &lt;-- <span class=\"hljs-number\">2</span>\n   totalNewData = Sum( newData, numNewData );  |\n   PrintNewDataSummary( newData, totalNewData, numNewData );\n   SaveNewDataSummary( totalNewData, numNewData );       &lt;-- <span class=\"hljs-number\">2</span>\n   ...\n}\n\n(<span class=\"hljs-number\">1</span>)CÃ¡c cÃ¢u lá»‡nh sá»­ dá»¥ng oldData.\n\n(<span class=\"hljs-number\">2</span>)CÃ¡c cÃ¢u lá»‡nh sá»­ dá»¥ng newData.</code></pre>\n<p>Khi mÃ  code bá»‹ lá»—i thÃ¬ viá»‡c tÃ¡ch nhÆ° trÃªn sáº½ giÃºp ta sá»­a dá»… dÃ ng sá»­a lá»—i hÆ¡n vÃ  cáº£ khi báº¡n muá»‘n chia code nÃ y ra thÃ nh cÃ¡c hÃ m thÃ¬ rÃµ rÃ ng  cÃ¡ch viáº¿t thá»© hai nÃ y sáº½ tÃ¡ch nhanh hÆ¡n cÃ¡ch thá»© nháº¥t.</p>\n<p><strong>PhÃ¡ nhá»¯ng nhÃ³m cÃ¢u lá»‡nh cÃ³ liÃªn quan Ä‘á»ƒ Ä‘Æ°a vÃ o cÃ¡c hÃ m riÃªng</strong>. Má»™t biáº¿n trong má»™t hÃ m sáº½ cÃ³ khuynh hÆ°á»›ng lÃ m span vÃ  live time nhá» hÆ¡n. Báº±ng cÃ¡ch phÃ¡ nhÃ³m cÃ¢u lá»‡nh ra nhÆ° váº­y báº¡n lÃ m dáº£m &quot;Ä‘á»‹a bÃ n hoáº¡t Ä‘á»™ng&quot; cá»§a cÃ¡c biáº¿n ráº¥t nhiá»u.</p>\n<p><strong>Báº¯t Ä‘áº§u vá»›i pháº¡m vi nhá» nháº¥t cÃ³ thá»ƒ, chá»‰ má»Ÿ rá»™ng khi nÃ o tháº­t cáº§n thiáº¿t.</strong> Viá»‡c thu nhá» pháº¡m vi má»™t biáº¿n Ä‘Ã£ Ä‘Æ°á»£c má»Ÿ rá»™ng thÃ¬ khÃ³ hÆ¡n ráº¥t nhiá»u viá»‡c má»Ÿ rá»™ng pháº¡m vi cá»§a biáº¿n Ä‘ang cÃ³ pháº¡m vi nhá», Ä‘Æ°a má»™t biáº¿n toÃ n cá»¥c thÃ nh má»™t biáº¿n class thÃ¬ Ä‘Æ°Æ¡ng nhiÃªn sáº½ khÃ³ hÆ¡n ráº¥t nhiá»u vá»›i viá»‡c Ä‘Æ°a biáº¿n class thÃ nh biáº¿n toÃ n cá»¥c. Vá»›i lÃ­ do Ä‘Ã³, hÃ£y Æ°u tiÃªn cho pháº¡m vi nhá» nháº¥t cÃ³ thá»ƒ: má»™t biáº¿n cá»¥c bá»™ cho má»—i vÃ²ng láº·p, má»™t biáº¿n cá»¥c bá»™ cho má»™t hÃ m, rá»“i biáº¿n private cho class, rá»“i Ä‘áº¿n biáº¿n protected, rá»“i package( náº¿u ngÃ´n ngá»¯ cá»§a báº¡n há»— trá»£ nÃ³), vÃ  táº¥t nhiÃªn biáº¿n toÃ n cá»¥c lÃ  phÆ°Æ¡ng Ã¡n cuá»‘i cÃ¹ng!</p>\n<p>Äá»‘i vá»›i nhiá»u láº­p trÃ¬nh viÃªn, viá»‡c thu nhá» pháº¡m vi biáº¿n hay khÃ´ng cÃ²n phá»¥ thuá»™c vÃ o  quan Ä‘iá»ƒm cá»§a há» vá» &quot;sá»± tiá»‡n lá»£i&quot; vÃ  &quot;sá»± dá»… quáº£n lÃ­&quot;. Má»™t sá»‘ láº­p trÃ¬nh viÃªn dÃ¹ng ráº¥t nhiá»u biáº¿n toÃ n cá»¥c vÃ¬ nÃ³ cÃ³ thá»ƒ truy cáº­p tá»« báº¥t cá»© Ä‘Ã¢u mÃ  khÃ´ng bá»‹ máº¥y cÃ¡i quy Ä‘á»‹nh vá» pháº¡m vi biáº¿n lÃ m phiá»n. Trong suy nghÄ© cá»§a há», sá»± tiá»‡n lá»£i Ä‘Ã³ quan trá»ng hÆ¡n cáº£ nhá»¯ng rá»§i ro cá»±c kÃ¬ ráº¯c rá»‘i.</p>\n<p>Nhá»¯ng láº­p trÃ¬nh viÃªn khÃ¡c thÃ¬ thÃ­ch giá»¯ cÃ¡c biáº¿n cÃ ng cá»¥c bá»™ cÃ ng tá»‘t bá»Ÿi vÃ¬ nÃ³ giÃºp cho code dá»… quáº£n lÃ­ hÆ¡n. CÃ ng áº©n Ä‘i nhiá»u thÃ´ng tin thÃ¬ báº¡n cÃ ng dá»… táº­p trung hÆ¡n vÃ o má»™t thá»© trong má»™t thá»i Ä‘iá»ƒm. NhÆ° tháº¿ cÃ³ thá»ƒ giÃºp báº¡n trÃ¡nh nhá»¯ng lá»—i do báº¡n quÃªn máº¥t má»™t trong sá»‘ hÃ ng tÃ¡ thÃ´ng tin mÃ  báº¡n pháº£i nhá»› cÃ¹ng lÃºc.</p>\n<p>Sá»± khÃ¡c biá»‡t giá»¯a triáº¿t lÃ­ &quot;thuáº­n tiá»‡n&quot; vÃ  triáº¿t lÃ­ &quot;dá»… quáº£n lÃ­&quot; nháº¥n máº¡nh sá»± khÃ¡c nhau trong viáº¿t vÃ  Ä‘á»c chÆ°Æ¡ng trÃ¬nh. Má»Ÿ rá»™ng háº¿t má»©c pháº¡m vi biáº¿n cÃ³ thá»ƒ lÃ m cho viá»‡c viáº¿t chÆ°Æ¡ng trÃ¬nh dá»… hÆ¡n nhiá»u nhÆ°ng má»™t chÆ°Æ¡ng trÃ¬nh mÃ  má»™t hÃ m cÅ©ng cÃ³ thá»ƒ gá»i cÃ¡c biáº¿n tá»« báº¥t kÃ¬ Ä‘Ã¢u sáº½ ráº¥t khÃ³ Ä‘á»ƒ tÃ¬m ra Ä‘Ã¢u lÃ  yáº¿u tá»‘ mÃ  nhá»¯ng hÃ m Ä‘Ã³ tháº­t sá»± sá»­ dá»¥ng. Trong má»™t chÆ°Æ¡ng trÃ¬nh nhÆ° tháº¿, báº¡n khÃ´ng thá»ƒ hiá»ƒu chá»‰ má»™t hÃ m mÃ  pháº£i hiá»ƒu toÃ n bá»™ chÆ°Æ¡ng trÃ¬nh. Má»™t chÆ°Æ¡ng trÃ¬nh nhÆ° váº­y thÃ¬ ráº¥t khÃ³ Ä‘á»c, ráº¥t khÃ³ Debug, cÅ©ng nhÆ° ráº¥t khÃ³ Ä‘á»ƒ chá»‰nh sá»­a.</p>\n<p>TÃ³m láº¡i, báº¡n nÃªn khai bÃ¡o/sá»­ dá»¥ng má»—i biáº¿n lÃ m sao cho nÃ³ Ä‘Æ°á»£c nhÃ¬n tháº¥y trong Ä‘oáº¡n code nhá» nháº¥t cÃ³ thá»ƒ. Rá»“i báº¡n sáº½ nháº­n ra ráº±ng báº¡n ráº¥t hiáº¿m khi  báº¡n sá»­ dá»¥ng má»™t biáº¿n toÃ n cá»¥c má»™t cÃ¡ch Ä‘Æ¡n thuáº§n ğŸ˜Š</p>\n<hr>\n<p>BÃ i viáº¿t cÃ³ tham kháº£o má»™t sá»‘ ná»™i dung trong cuá»‘n Code Complete vÃ  cÃ¡c tÃ i liá»‡u khÃ¡c ğŸ˜Š</p>\n<hr>\n<p>Part 1 á»Ÿ Ä‘Ã¢y: <a href=\"http://daynhauhoc.com/t/lam-sao-de-su-dung-bien-hieu-qua-hon-part1/6921\">http://daynhauhoc.com/t/lam-sao-de-su-dung-bien-hieu-qua-hon-part1/6921</a><br>\nPart3 á»Ÿ Ä‘Ã¢y:  <a href=\"http://daynhauhoc.com/t/lam-sao-de-su-dung-bien-hieu-qua-hon-part3/6992\">http://daynhauhoc.com/t/lam-sao-de-su-dung-bien-hieu-qua-hon-part3/6992</a><br>\nPart4 á»Ÿ Ä‘Ã¢y: <a href=\"http://daynhauhoc.com/t/lam-sao-de-su-dung-bien-hieu-qua-hon-part-4/7063\">http://daynhauhoc.com/t/lam-sao-de-su-dung-bien-hieu-qua-hon-part-4/7063</a></p>\n","rawBody":"\n\nBÃ i [viáº¿t trÆ°á»›c][1] mÃ¬nh Ä‘Ã£ nÃ³i vá» cÃ¡ch khai bÃ¡o biáº¿n vÃ  khá»Ÿi táº¡o biáº¿n vÃ  bÃ i viáº¿t nÃ y sáº½ nÃ³i vá» cÃ¡ch chá»n pháº¡m vi biáº¿n sao cho code hiá»‡u quáº£, dá»… Ä‘á»c, dá»… hiá»ƒu vÃ  táº¥t nhiÃªn lÃ  dá»… debug :blush:\n\n#Part2: Pháº¡m vi biáº¿n (Scope)\n----------------\n<div align=center><img src='/uploads/default/2986/5e46151fe3050079.png' width=\"500\" height=\"429\"> <br></div>\n\n##HÃ£y Ä‘á»ƒ tham chiáº¿u (reference)  Ä‘áº¿n cÃ¡c biáº¿n gáº§n nhau\n\nCÃ³ má»™t phÆ°Æ¡ng phÃ¡p Ä‘á»ƒ tÃ­nh toÃ¡n má»©c Ä‘á»™ gáº§n nhau cá»§a cÃ¡c tham chiáº¿u/lá»i gá»i biáº¿n Ä‘Ã³ lÃ  Æ°á»›c tÃ­nh sá»‘ span cá»§a biáº¿n . ÄÃ¢y lÃ  vÃ­ dá»¥ vá» sá»‘ span:\n\n```\na=0;  <--- Tham chiáº¿u Ä‘áº¿n a láº§n 1\nb=0; <--- Tham chiáº¿u Ä‘áº¿n b láº§n 1\nc=0;<--- Tham chiáº¿u Ä‘áº¿n c láº§n 1\na= b + c;  <--- Tham chiáº¿u Ä‘áº¿n a láº§n 2, Tham chiáº¿u Ä‘áº¿n b láº§n 2, Tham chiáº¿u Ä‘áº¿n c láº§n 2\n```\nTrong trÆ°á»ng há»£p nÃ y, cÃ³ 2 dÃ²ng náº±m giá»¯a tham chiáº¿u Ä‘áº¿n biáº¿n `a` thá»© nháº¥t vÃ  thá»© hai, váº­y `a` cÃ³ sá»‘ span lÃ  2, tÆ°Æ¡ng tá»± ta cÃ³ sá»‘ span cá»§a b vÃ  c láº§n lÆ°á»£t lÃ  1 vÃ  0. VÃ  Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ khÃ¡c\n\n```\na = 0;\nb = 0;\nc = 0;\nb = a + 1;\nb = b / c;\n```\n\nTrong trÆ°á»ng há»£p nÃ y, cÃ³ 1 dÃ²ng giá»¯a tham chiáº¿u Ä‘áº¿n `b` thá»© nháº¥t vÃ  thá»© hai nÃªn nÃ³ cÃ³ span lÃ  1. VÃ  khÃ´ng cÃ³ dÃ²ng nÃ o giá»¯a tham chiáº¿u thá»© hai vÃ  tham chiáº¿u thá»© ba, váº­y cÃ³ span lÃ  0.\n\nSá»‘ span trung bÃ¬nh Ä‘Æ°á»£c tÃ­nh toÃ¡n dá»±a trÃªn nhá»¯ng span riÃªng láº». Trong vÃ­ dá»¥ 2, vá»›i b, (1+0)/2 = 0.5, váº­y sá»‘ span trung bÃ¬nh cá»§a b lÃ  0.5. Khi mÃ  báº¡n giá»¯ cÃ¡c tham chiáº¿u Ä‘áº¿n biáº¿n gáº§n nhau, báº¡n cÃ³ thá»ƒ giÃºp ngÆ°á»i Ä‘á»c code cá»§a báº¡n táº­p trung vÃ o má»™t pháº§n cá»§a code, cÃ²n  náº¿u báº¡n gá»i biáº¿n cÃ¡ch xa nhau, báº¡n sáº½ báº¯t ngÆ°á»i Ä‘á»c lá»¥c tung cáº£ chÆ°Æ¡ng trÃ¬nh. VÃ¬ tháº¿ lá»£i Ã­ch chÃ­nh cá»§a viá»‡c sáº¯p xáº¿p biáº¿n gáº§n nhau lÃ  tÄƒng kháº£ nÄƒng Ä‘á»c code rÃµ rÃ ng vÃ  dá»… hiá»ƒu hÆ¡n.\n\n##HÃ£y giá»¯ cho biáº¿n \"sá»‘ng\" trong thá»i gian Ã­t nháº¥t cÃ³ thá»ƒ\n\ná» Ä‘Ã¢y ta cÃ³ thÃªm má»™t khÃ¡i niá»‡m ná»¯a lÃ  \"live time\" lÃ  tá»•ng sá»‘ dÃ²ng lá»‡nh mÃ  biáº¿n Ä‘Æ°á»£c sá»­ dá»¥ng. Biáº¿n tá»“n táº¡i tá»« dÃ²ng lá»‡nh Ä‘áº§u tiÃªn mÃ  nÃ³ Ä‘Æ°á»£c gá»i Ä‘áº¿n vÃ  nÃ³ káº¿t thÃºc á»Ÿ dÃ²ng lá»‡nh cuá»‘i cÃ¹ng mÃ  nÃ³ Ä‘Æ°á»£c gá»i Ä‘áº¿n.\n\nKhÃ´ng giá»‘ng nhÆ° span, live time cá»§a biáº¿n khÃ´ng bá»‹ áº£nh hÆ°á»Ÿng bá»Ÿi sá»‘ láº§n biáº¿n Ä‘Æ°á»£c sá»­ dá»¥ng tá»« láº§n Ä‘áº§u tá»›i láº§n cuá»‘i mÃ  biáº¿n Ä‘Æ°á»£c gá»i Ä‘áº¿n. Náº¿u biáº¿n Ä‘Æ°á»£c gá»i láº§n Ä‘áº§u tiÃªn á»Ÿ dÃ²ng 1 vÃ  láº§n cuá»‘i cÃ¹ng á»Ÿ dÃ²ng 25 thÃ¬ nÃ³ sáº½ tá»“n táº¡i trong 25 dÃ²ng lá»‡nh. Náº¿u chá»‰ cÃ³ 2 dÃ²ng trong Ä‘Ã³ biáº¿n Ä‘Æ°á»£c sá»­ dá»¥ng thÃ¬ nÃ³ cÃ³ span trung bÃ¬nh lÃ  23 dÃ²ng lá»‡nh. Náº¿u biáº¿n Ä‘Ã£ Ä‘Æ°á»£c dÃ¹ng á»Ÿ má»—i dÃ²ng tá»« dÃ²ng 1 Ä‘áº¿n 25, nÃ³ sáº½ cÃ³ sá»‘ span trung bÃ¬nh lÃ  0 dÃ²ng lá»‡nh, nhÆ°ng nÃ³ váº¥n sáº½ cÃ³ live time lÃ  25 dÃ²ng lá»‡nh. HÃ¬nh 10-1 minh há»a cáº£ 2 thÃ´ng sá»‘ span vÃ  live time.\n\n<div align=center><img src=\"/uploads/default/2982/f2e568955025434a.jpg\" width=\"500\" height=\"429\"> <br> <br>\"Live time\" thá»ƒ hiá»‡n tuá»•i thá» cá»§a biáº¿n, \"Span\"  lÃ  sá»‘ \"bÆ°á»›c\" nÃ³ thá»ƒ hiá»‡n Ä‘á»™ gáº§n nhau cá»§a cÃ¡ch tham chiáº¿u Ä‘áº¿n biáº¿n <br></div>\n\nTÃ³m láº¡i, cÅ©ng nhÆ° vá»›i span, má»¥c tiÃªu cáº§n quan tÃ¢m vá»›i live time Ä‘Ã³ lÃ  giá»¯ con sá»‘ Ä‘Ã³ NHá»,  tá»©c lÃ  hÃ£y lÃ m cho biáº¿n \"cháº¿t sá»›m\" nháº¥t cÃ³ thá»ƒ.\n##TÃ­nh toÃ¡n thá»i gian tá»“n táº¡i cá»§a biáº¿n\n\nBáº¡n cÃ³ thá»ƒ tÃ­nh live time cá»§a biáº¿n báº±ng cÃ¡ch Ä‘áº¿m sá»‘ dÃ²ng giá»¯a láº§n Ä‘áº§u vÃ  láº§n cuá»‘i gá»i biáº¿n (bao gá»“m cáº£ láº§n Ä‘áº§u vÃ  láº§n cuá»‘i). ÄÃ¢y lÃ  vÃ­ dá»¥ khi Ä‘á»ƒ  biáº¿n \"sá»‘ng quÃ¡ dai\".\n\n```java\n1 // khá»Ÿi táº¡o táº¥t cáº£ cÃ¡c biáº¿n\n2 recordIndex= 0;\n3 total = 0;\n4 done = false;\n    ...\n26 while ( recordIndex < recordCount ) {\n27 ...\n28 recordIndex = recordIndex +1;    **<--1**\n    ...\n64 while (!done) {\n    ...\n69 if ( total > projectedTotal ) {         **<--2**\n70     done=true;            **<--3**\n(1) láº§n cuá»‘i gá»i recordIndex.\n(2) láº§n cuá»‘i gá»i total.\n(3) láº§n cuá»‘i gá»i done.\n```\n\nÄÃ¢y lÃ  live time cá»§a 3 biáº¿n trong vÃ­ dá»¥ nÃ y:\n\n\n* recordIndex: ( line 28 - line 2 + 1 ) = 27 \n* total:  ( line 69 - line 3 + 1 ) = 67 \n* done: ( line 70 - line 4 + 1 ) = 67\n* Live Time trung bÃ¬nh: ( 27 + 67 + 67 ) / 3 â‰ˆ 54\n\nCÃ²n Ä‘Ã¢y lÃ  báº£n sá»­a láº¡i:\n\n```java\n...\n25  recordIndex = 0;       <-- 1\n26  while ( recordIndex < recordCount ) {\n27  ...\n28     recordIndex = recordIndex + 1;\n       ...\n62  total = 0;       <-- 2\n63  done = false;       <-- 2\n64  while ( !done ) {\n       ...\n69     if ( total > projectedTotal ) {\n70        done = true;\n(1)Khá»Ÿi táº¡o recordIndex Ä‘Æ°á»£c chuyá»ƒn xuá»‘ng tá»« dÃ²ng 3.\n(2)Khá»Ÿi táº¡o total vÃ  done Ä‘Æ°á»£c chuyá»ƒn xuá»‘ng tá»« dÃ²ng 4 and 5\n```\n\nÄÃ¢y lÃ  thá»i gian tá»“n táº¡i cá»§a biáº¿n trong vÃ­ dá»¥:\n\n\n* recordIndex: ( line 28 - line 25 + 1 ) = 4 \n* total: ( line 69 - line 62 + 1 ) = 8 \n* done :  ( line 70 - line 63 + 1 ) = 8\n* Live Time trung bÃ¬nh: ( 4 + 4+ 8 ) / 3 â‰ˆ 7\n\nNhÆ° Ä‘Ã£ tháº¥y, vÃ­ dá»¥ thá»© 2 tá»‘t hÆ¡n vÃ­ dá»¥ thá»© nháº¥t bá»Ÿi khá»Ÿi táº¡o biáº¿n Ä‘Æ°á»£c biá»ƒu diá»…n gáº§n nhau á»Ÿ nÆ¡i biáº¿n Ä‘Æ°á»£c sá»­ dá»¥ng. Sá»± khÃ¡c nhau cá»§a hai live time trung bÃ¬nh tháº­t sá»± ráº¥t Ä‘Ã¡ng chÃº Ã½: 54 vÃ  7\n\nMá»™t con sá»‘ lÃ m nÃªn sá»± khÃ¡c biá»‡t code tá»‘t vÃ  khÃ´ng tá»‘t? Máº·c dÃ¹ cÃ¡c nhÃ  nghiÃªn cá»©u chÆ°a cÃ³ con sá»‘ nÃ o chÃ­nh xÃ¡c nhÆ°ng hoÃ n toÃ n cÃ³ thá»ƒ tin ráº±ng: live time vá»›i span cÃ ng nhá» thÃ¬ cÃ ng tá»‘t.\n\nNáº¿u báº¡n thá»­ cÃ³ Ã¡p dá»¥ng khÃ¡i niá»‡m span vÃ  live time vÃ o biáº¿n toÃ n cá»¥c thÃ¬ báº¡n sáº½ Ä‘Æ°á»£c con sá»‘ ráº¥t lá»›n, Ä‘Ã¢y lÃ  má»™t trong nhiá»u lÃ­ do ta nÃªn trÃ¡nh dÃ¹ng biáº¿n toÃ n cá»¥c khi cÃ³ thá»ƒ dÃ¹ng biáº¿n cá»¥c bá»™.\n\n#Má»™t sá»‘ thá»§ thuáº­t lÃ m nhá» \"Ä‘á»‹a bÃ n\" cá»§a biáº¿n\n\nÄÃ¢y lÃ  má»™t sá»‘ thá»§ thuáº­t Ä‘áº·c biá»‡t Ä‘á»ƒ giÃºp báº¡n thu gá»n táº§m hoáº¡t Ä‘á»™ng cá»§a biáº¿n láº¡i:\n\n**Khá»Ÿi táº¡o biáº¿n Ä‘Æ°á»£c dÃ¹ng trong vÃ²ng láº·p ngay trÆ°á»›c vÃ²ng láº·p Ä‘Ã³ chá»© Ä‘á»«ng Ä‘áº·t á»Ÿ Ä‘áº§u hÃ m chá»©a vÃ²ng láº·p Ä‘Ã³**. Viá»‡c nÃ y sáº½ cÃ³ Ã­ch khi báº¡n sá»­a Ä‘á»•i vÃ²ng láº·p, báº¡n sáº½ nhá»› pháº£i thay Ä‘á»•i cáº£ cÃ¡c khá»Ÿi táº¡o vÃ²ng láº·p. \n\n**Chá»‰ gÃ¡n giÃ¡ trá»‹ cho biáº¿n khi nÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng.**  Náº¿u gÃ¡n bá»«a bÃ£i sau nÃ y báº¡n sáº½ gáº·p khÃ³ khÄƒn khi Ä‘á»c code.\n\n**NhÃ³m nhá»¯ng cÃ¢u lá»‡nh liÃªn quan láº¡i vá»›i nhau**. CÃ¡c vÃ­ dá»¥ sau sáº½ minh hoáº¡ viá»‡c nhÃ³m cÃ¡c tham chiáº¿u Ä‘áº¿n cÃ¡c biáº¿n láº¡i vá»›i nhau lÃ m cho chÃºng dá»… tÃ¬m tháº¥y hÆ¡n. Äáº§u tiÃªn lÃ  vÃ­ dá»¥ cá»§a viá»‡c vi pháº¡m nguyÃªn táº¯c nÃ y:\n\n```c\nvoid SummarizeData(...) {\n   ...\n   GetOldData( oldData, &numOldData );      **<-- 1**\n   GetNewData( newData, &numNewData );         |\n   totalOldData = Sum( oldData, numOldData );  |\n   totalNewData = Sum( newData, numNewData );  |\n   PrintOldDataSummary( oldData, totalOldData, numOldData );\n   PrintNewDataSummary( newData, totalNewData, numNewData );\n   SaveOldDataSummary( totalOldData, numOldData );\n   SaveNewDataSummary( totalNewData, numNewData );       **<-- 1**\n   ...\n}\n\n(1)CÃ¡c cÃ¢u lá»‡nh sá»­ dá»¥ng 2 táº­p há»£p biáº¿n\n```\nTrong vÃ­ dá»¥ nÃ y, báº¡n nÃ©m cÃ¡c biáº¿n oldData, newData, numOldData, numNewData, totalOldData vÃ o má»™t block. VÃ­ dá»¥ sau sáº½ Ä‘á»ƒ 3 biáº¿n trong má»™t block:\n\n```c\nvoid SummarizeData( ... ) {\n   GetOldData( oldData, &numOldData );       <-- 1\n   totalOldData = Sum( oldData, numOldData );  |\n   PrintOldDataSummary( oldData, totalOldData, numOldData );\n   SaveOldDataSummary( totalOldData, numOldData );       <-- 1\n   ...\n   GetNewData( newData, &numNewData );       <-- 2\n   totalNewData = Sum( newData, numNewData );  |\n   PrintNewDataSummary( newData, totalNewData, numNewData );\n   SaveNewDataSummary( totalNewData, numNewData );       <-- 2\n   ...\n}\n\n(1)CÃ¡c cÃ¢u lá»‡nh sá»­ dá»¥ng oldData.\n\n(2)CÃ¡c cÃ¢u lá»‡nh sá»­ dá»¥ng newData.\n```\nKhi mÃ  code bá»‹ lá»—i thÃ¬ viá»‡c tÃ¡ch nhÆ° trÃªn sáº½ giÃºp ta sá»­a dá»… dÃ ng sá»­a lá»—i hÆ¡n vÃ  cáº£ khi báº¡n muá»‘n chia code nÃ y ra thÃ nh cÃ¡c hÃ m thÃ¬ rÃµ rÃ ng  cÃ¡ch viáº¿t thá»© hai nÃ y sáº½ tÃ¡ch nhanh hÆ¡n cÃ¡ch thá»© nháº¥t.\n\n**PhÃ¡ nhá»¯ng nhÃ³m cÃ¢u lá»‡nh cÃ³ liÃªn quan Ä‘á»ƒ Ä‘Æ°a vÃ o cÃ¡c hÃ m riÃªng**. Má»™t biáº¿n trong má»™t hÃ m sáº½ cÃ³ khuynh hÆ°á»›ng lÃ m span vÃ  live time nhá» hÆ¡n. Báº±ng cÃ¡ch phÃ¡ nhÃ³m cÃ¢u lá»‡nh ra nhÆ° váº­y báº¡n lÃ m dáº£m \"Ä‘á»‹a bÃ n hoáº¡t Ä‘á»™ng\" cá»§a cÃ¡c biáº¿n ráº¥t nhiá»u.\n\n**Báº¯t Ä‘áº§u vá»›i pháº¡m vi nhá» nháº¥t cÃ³ thá»ƒ, chá»‰ má»Ÿ rá»™ng khi nÃ o tháº­t cáº§n thiáº¿t.** Viá»‡c thu nhá» pháº¡m vi má»™t biáº¿n Ä‘Ã£ Ä‘Æ°á»£c má»Ÿ rá»™ng thÃ¬ khÃ³ hÆ¡n ráº¥t nhiá»u viá»‡c má»Ÿ rá»™ng pháº¡m vi cá»§a biáº¿n Ä‘ang cÃ³ pháº¡m vi nhá», Ä‘Æ°a má»™t biáº¿n toÃ n cá»¥c thÃ nh má»™t biáº¿n class thÃ¬ Ä‘Æ°Æ¡ng nhiÃªn sáº½ khÃ³ hÆ¡n ráº¥t nhiá»u vá»›i viá»‡c Ä‘Æ°a biáº¿n class thÃ nh biáº¿n toÃ n cá»¥c. Vá»›i lÃ­ do Ä‘Ã³, hÃ£y Æ°u tiÃªn cho pháº¡m vi nhá» nháº¥t cÃ³ thá»ƒ: má»™t biáº¿n cá»¥c bá»™ cho má»—i vÃ²ng láº·p, má»™t biáº¿n cá»¥c bá»™ cho má»™t hÃ m, rá»“i biáº¿n private cho class, rá»“i Ä‘áº¿n biáº¿n protected, rá»“i package( náº¿u ngÃ´n ngá»¯ cá»§a báº¡n há»— trá»£ nÃ³), vÃ  táº¥t nhiÃªn biáº¿n toÃ n cá»¥c lÃ  phÆ°Æ¡ng Ã¡n cuá»‘i cÃ¹ng!\n\n\nÄá»‘i vá»›i nhiá»u láº­p trÃ¬nh viÃªn, viá»‡c thu nhá» pháº¡m vi biáº¿n hay khÃ´ng cÃ²n phá»¥ thuá»™c vÃ o  quan Ä‘iá»ƒm cá»§a há» vá» \"sá»± tiá»‡n lá»£i\" vÃ  \"sá»± dá»… quáº£n lÃ­\". Má»™t sá»‘ láº­p trÃ¬nh viÃªn dÃ¹ng ráº¥t nhiá»u biáº¿n toÃ n cá»¥c vÃ¬ nÃ³ cÃ³ thá»ƒ truy cáº­p tá»« báº¥t cá»© Ä‘Ã¢u mÃ  khÃ´ng bá»‹ máº¥y cÃ¡i quy Ä‘á»‹nh vá» pháº¡m vi biáº¿n lÃ m phiá»n. Trong suy nghÄ© cá»§a há», sá»± tiá»‡n lá»£i Ä‘Ã³ quan trá»ng hÆ¡n cáº£ nhá»¯ng rá»§i ro cá»±c kÃ¬ ráº¯c rá»‘i.\n\nNhá»¯ng láº­p trÃ¬nh viÃªn khÃ¡c thÃ¬ thÃ­ch giá»¯ cÃ¡c biáº¿n cÃ ng cá»¥c bá»™ cÃ ng tá»‘t bá»Ÿi vÃ¬ nÃ³ giÃºp cho code dá»… quáº£n lÃ­ hÆ¡n. CÃ ng áº©n Ä‘i nhiá»u thÃ´ng tin thÃ¬ báº¡n cÃ ng dá»… táº­p trung hÆ¡n vÃ o má»™t thá»© trong má»™t thá»i Ä‘iá»ƒm. NhÆ° tháº¿ cÃ³ thá»ƒ giÃºp báº¡n trÃ¡nh nhá»¯ng lá»—i do báº¡n quÃªn máº¥t má»™t trong sá»‘ hÃ ng tÃ¡ thÃ´ng tin mÃ  báº¡n pháº£i nhá»› cÃ¹ng lÃºc.\n\nSá»± khÃ¡c biá»‡t giá»¯a triáº¿t lÃ­ \"thuáº­n tiá»‡n\" vÃ  triáº¿t lÃ­ \"dá»… quáº£n lÃ­\" nháº¥n máº¡nh sá»± khÃ¡c nhau trong viáº¿t vÃ  Ä‘á»c chÆ°Æ¡ng trÃ¬nh. Má»Ÿ rá»™ng háº¿t má»©c pháº¡m vi biáº¿n cÃ³ thá»ƒ lÃ m cho viá»‡c viáº¿t chÆ°Æ¡ng trÃ¬nh dá»… hÆ¡n nhiá»u nhÆ°ng má»™t chÆ°Æ¡ng trÃ¬nh mÃ  má»™t hÃ m cÅ©ng cÃ³ thá»ƒ gá»i cÃ¡c biáº¿n tá»« báº¥t kÃ¬ Ä‘Ã¢u sáº½ ráº¥t khÃ³ Ä‘á»ƒ tÃ¬m ra Ä‘Ã¢u lÃ  yáº¿u tá»‘ mÃ  nhá»¯ng hÃ m Ä‘Ã³ tháº­t sá»± sá»­ dá»¥ng. Trong má»™t chÆ°Æ¡ng trÃ¬nh nhÆ° tháº¿, báº¡n khÃ´ng thá»ƒ hiá»ƒu chá»‰ má»™t hÃ m mÃ  pháº£i hiá»ƒu toÃ n bá»™ chÆ°Æ¡ng trÃ¬nh. Má»™t chÆ°Æ¡ng trÃ¬nh nhÆ° váº­y thÃ¬ ráº¥t khÃ³ Ä‘á»c, ráº¥t khÃ³ Debug, cÅ©ng nhÆ° ráº¥t khÃ³ Ä‘á»ƒ chá»‰nh sá»­a.\n\nTÃ³m láº¡i, báº¡n nÃªn khai bÃ¡o/sá»­ dá»¥ng má»—i biáº¿n lÃ m sao cho nÃ³ Ä‘Æ°á»£c nhÃ¬n tháº¥y trong Ä‘oáº¡n code nhá» nháº¥t cÃ³ thá»ƒ. Rá»“i báº¡n sáº½ nháº­n ra ráº±ng báº¡n ráº¥t hiáº¿m khi  báº¡n sá»­ dá»¥ng má»™t biáº¿n toÃ n cá»¥c má»™t cÃ¡ch Ä‘Æ¡n thuáº§n :blush: \n\n-----------\n\n\nBÃ i viáº¿t cÃ³ tham kháº£o má»™t sá»‘ ná»™i dung trong cuá»‘n Code Complete vÃ  cÃ¡c tÃ i liá»‡u khÃ¡c :blush: \n\n\n------------\nPart 1 á»Ÿ Ä‘Ã¢y: http://daynhauhoc.com/t/lam-sao-de-su-dung-bien-hieu-qua-hon-part1/6921\nPart3 á»Ÿ Ä‘Ã¢y:  http://daynhauhoc.com/t/lam-sao-de-su-dung-bien-hieu-qua-hon-part3/6992\nPart4 á»Ÿ Ä‘Ã¢y: http://daynhauhoc.com/t/lam-sao-de-su-dung-bien-hieu-qua-hon-part-4/7063\n  [1]: http://daynhauhoc.com/t/lam-sao-de-su-dung-bien-hieu-qua-hon-part1/6921\n","raw":"---json\n{\"id\":6936,\"layout\":\"Post\",\"route\":\"lam-sao-de-su-dung-bien-hieu-qua-hon-part2\",\"title\":\"LÃ m sao Ä‘á»ƒ sá»­ dá»¥ng biáº¿n hiá»‡u quáº£ hÆ¡n (part2)\",\"tags\":[\"coding-style\"],\"date\":\"2015-05-06T03:16:39.897Z\",\"author\":{\"username\":\"thanhmssl10\",\"avatar\":\"/user_avatar/daynhauhoc.com/thanhmssl10/{size}/2345_1.png\"}}\n---\n\n\nBÃ i [viáº¿t trÆ°á»›c][1] mÃ¬nh Ä‘Ã£ nÃ³i vá» cÃ¡ch khai bÃ¡o biáº¿n vÃ  khá»Ÿi táº¡o biáº¿n vÃ  bÃ i viáº¿t nÃ y sáº½ nÃ³i vá» cÃ¡ch chá»n pháº¡m vi biáº¿n sao cho code hiá»‡u quáº£, dá»… Ä‘á»c, dá»… hiá»ƒu vÃ  táº¥t nhiÃªn lÃ  dá»… debug :blush:\n\n#Part2: Pháº¡m vi biáº¿n (Scope)\n----------------\n<div align=center><img src='/uploads/default/2986/5e46151fe3050079.png' width=\"500\" height=\"429\"> <br></div>\n\n##HÃ£y Ä‘á»ƒ tham chiáº¿u (reference)  Ä‘áº¿n cÃ¡c biáº¿n gáº§n nhau\n\nCÃ³ má»™t phÆ°Æ¡ng phÃ¡p Ä‘á»ƒ tÃ­nh toÃ¡n má»©c Ä‘á»™ gáº§n nhau cá»§a cÃ¡c tham chiáº¿u/lá»i gá»i biáº¿n Ä‘Ã³ lÃ  Æ°á»›c tÃ­nh sá»‘ span cá»§a biáº¿n . ÄÃ¢y lÃ  vÃ­ dá»¥ vá» sá»‘ span:\n\n```\na=0;  <--- Tham chiáº¿u Ä‘áº¿n a láº§n 1\nb=0; <--- Tham chiáº¿u Ä‘áº¿n b láº§n 1\nc=0;<--- Tham chiáº¿u Ä‘áº¿n c láº§n 1\na= b + c;  <--- Tham chiáº¿u Ä‘áº¿n a láº§n 2, Tham chiáº¿u Ä‘áº¿n b láº§n 2, Tham chiáº¿u Ä‘áº¿n c láº§n 2\n```\nTrong trÆ°á»ng há»£p nÃ y, cÃ³ 2 dÃ²ng náº±m giá»¯a tham chiáº¿u Ä‘áº¿n biáº¿n `a` thá»© nháº¥t vÃ  thá»© hai, váº­y `a` cÃ³ sá»‘ span lÃ  2, tÆ°Æ¡ng tá»± ta cÃ³ sá»‘ span cá»§a b vÃ  c láº§n lÆ°á»£t lÃ  1 vÃ  0. VÃ  Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ khÃ¡c\n\n```\na = 0;\nb = 0;\nc = 0;\nb = a + 1;\nb = b / c;\n```\n\nTrong trÆ°á»ng há»£p nÃ y, cÃ³ 1 dÃ²ng giá»¯a tham chiáº¿u Ä‘áº¿n `b` thá»© nháº¥t vÃ  thá»© hai nÃªn nÃ³ cÃ³ span lÃ  1. VÃ  khÃ´ng cÃ³ dÃ²ng nÃ o giá»¯a tham chiáº¿u thá»© hai vÃ  tham chiáº¿u thá»© ba, váº­y cÃ³ span lÃ  0.\n\nSá»‘ span trung bÃ¬nh Ä‘Æ°á»£c tÃ­nh toÃ¡n dá»±a trÃªn nhá»¯ng span riÃªng láº». Trong vÃ­ dá»¥ 2, vá»›i b, (1+0)/2 = 0.5, váº­y sá»‘ span trung bÃ¬nh cá»§a b lÃ  0.5. Khi mÃ  báº¡n giá»¯ cÃ¡c tham chiáº¿u Ä‘áº¿n biáº¿n gáº§n nhau, báº¡n cÃ³ thá»ƒ giÃºp ngÆ°á»i Ä‘á»c code cá»§a báº¡n táº­p trung vÃ o má»™t pháº§n cá»§a code, cÃ²n  náº¿u báº¡n gá»i biáº¿n cÃ¡ch xa nhau, báº¡n sáº½ báº¯t ngÆ°á»i Ä‘á»c lá»¥c tung cáº£ chÆ°Æ¡ng trÃ¬nh. VÃ¬ tháº¿ lá»£i Ã­ch chÃ­nh cá»§a viá»‡c sáº¯p xáº¿p biáº¿n gáº§n nhau lÃ  tÄƒng kháº£ nÄƒng Ä‘á»c code rÃµ rÃ ng vÃ  dá»… hiá»ƒu hÆ¡n.\n\n##HÃ£y giá»¯ cho biáº¿n \"sá»‘ng\" trong thá»i gian Ã­t nháº¥t cÃ³ thá»ƒ\n\ná» Ä‘Ã¢y ta cÃ³ thÃªm má»™t khÃ¡i niá»‡m ná»¯a lÃ  \"live time\" lÃ  tá»•ng sá»‘ dÃ²ng lá»‡nh mÃ  biáº¿n Ä‘Æ°á»£c sá»­ dá»¥ng. Biáº¿n tá»“n táº¡i tá»« dÃ²ng lá»‡nh Ä‘áº§u tiÃªn mÃ  nÃ³ Ä‘Æ°á»£c gá»i Ä‘áº¿n vÃ  nÃ³ káº¿t thÃºc á»Ÿ dÃ²ng lá»‡nh cuá»‘i cÃ¹ng mÃ  nÃ³ Ä‘Æ°á»£c gá»i Ä‘áº¿n.\n\nKhÃ´ng giá»‘ng nhÆ° span, live time cá»§a biáº¿n khÃ´ng bá»‹ áº£nh hÆ°á»Ÿng bá»Ÿi sá»‘ láº§n biáº¿n Ä‘Æ°á»£c sá»­ dá»¥ng tá»« láº§n Ä‘áº§u tá»›i láº§n cuá»‘i mÃ  biáº¿n Ä‘Æ°á»£c gá»i Ä‘áº¿n. Náº¿u biáº¿n Ä‘Æ°á»£c gá»i láº§n Ä‘áº§u tiÃªn á»Ÿ dÃ²ng 1 vÃ  láº§n cuá»‘i cÃ¹ng á»Ÿ dÃ²ng 25 thÃ¬ nÃ³ sáº½ tá»“n táº¡i trong 25 dÃ²ng lá»‡nh. Náº¿u chá»‰ cÃ³ 2 dÃ²ng trong Ä‘Ã³ biáº¿n Ä‘Æ°á»£c sá»­ dá»¥ng thÃ¬ nÃ³ cÃ³ span trung bÃ¬nh lÃ  23 dÃ²ng lá»‡nh. Náº¿u biáº¿n Ä‘Ã£ Ä‘Æ°á»£c dÃ¹ng á»Ÿ má»—i dÃ²ng tá»« dÃ²ng 1 Ä‘áº¿n 25, nÃ³ sáº½ cÃ³ sá»‘ span trung bÃ¬nh lÃ  0 dÃ²ng lá»‡nh, nhÆ°ng nÃ³ váº¥n sáº½ cÃ³ live time lÃ  25 dÃ²ng lá»‡nh. HÃ¬nh 10-1 minh há»a cáº£ 2 thÃ´ng sá»‘ span vÃ  live time.\n\n<div align=center><img src=\"/uploads/default/2982/f2e568955025434a.jpg\" width=\"500\" height=\"429\"> <br> <br>\"Live time\" thá»ƒ hiá»‡n tuá»•i thá» cá»§a biáº¿n, \"Span\"  lÃ  sá»‘ \"bÆ°á»›c\" nÃ³ thá»ƒ hiá»‡n Ä‘á»™ gáº§n nhau cá»§a cÃ¡ch tham chiáº¿u Ä‘áº¿n biáº¿n <br></div>\n\nTÃ³m láº¡i, cÅ©ng nhÆ° vá»›i span, má»¥c tiÃªu cáº§n quan tÃ¢m vá»›i live time Ä‘Ã³ lÃ  giá»¯ con sá»‘ Ä‘Ã³ NHá»,  tá»©c lÃ  hÃ£y lÃ m cho biáº¿n \"cháº¿t sá»›m\" nháº¥t cÃ³ thá»ƒ.\n##TÃ­nh toÃ¡n thá»i gian tá»“n táº¡i cá»§a biáº¿n\n\nBáº¡n cÃ³ thá»ƒ tÃ­nh live time cá»§a biáº¿n báº±ng cÃ¡ch Ä‘áº¿m sá»‘ dÃ²ng giá»¯a láº§n Ä‘áº§u vÃ  láº§n cuá»‘i gá»i biáº¿n (bao gá»“m cáº£ láº§n Ä‘áº§u vÃ  láº§n cuá»‘i). ÄÃ¢y lÃ  vÃ­ dá»¥ khi Ä‘á»ƒ  biáº¿n \"sá»‘ng quÃ¡ dai\".\n\n```java\n1 // khá»Ÿi táº¡o táº¥t cáº£ cÃ¡c biáº¿n\n2 recordIndex= 0;\n3 total = 0;\n4 done = false;\n    ...\n26 while ( recordIndex < recordCount ) {\n27 ...\n28 recordIndex = recordIndex +1;    **<--1**\n    ...\n64 while (!done) {\n    ...\n69 if ( total > projectedTotal ) {         **<--2**\n70     done=true;            **<--3**\n(1) láº§n cuá»‘i gá»i recordIndex.\n(2) láº§n cuá»‘i gá»i total.\n(3) láº§n cuá»‘i gá»i done.\n```\n\nÄÃ¢y lÃ  live time cá»§a 3 biáº¿n trong vÃ­ dá»¥ nÃ y:\n\n\n* recordIndex: ( line 28 - line 2 + 1 ) = 27 \n* total:  ( line 69 - line 3 + 1 ) = 67 \n* done: ( line 70 - line 4 + 1 ) = 67\n* Live Time trung bÃ¬nh: ( 27 + 67 + 67 ) / 3 â‰ˆ 54\n\nCÃ²n Ä‘Ã¢y lÃ  báº£n sá»­a láº¡i:\n\n```java\n...\n25  recordIndex = 0;       <-- 1\n26  while ( recordIndex < recordCount ) {\n27  ...\n28     recordIndex = recordIndex + 1;\n       ...\n62  total = 0;       <-- 2\n63  done = false;       <-- 2\n64  while ( !done ) {\n       ...\n69     if ( total > projectedTotal ) {\n70        done = true;\n(1)Khá»Ÿi táº¡o recordIndex Ä‘Æ°á»£c chuyá»ƒn xuá»‘ng tá»« dÃ²ng 3.\n(2)Khá»Ÿi táº¡o total vÃ  done Ä‘Æ°á»£c chuyá»ƒn xuá»‘ng tá»« dÃ²ng 4 and 5\n```\n\nÄÃ¢y lÃ  thá»i gian tá»“n táº¡i cá»§a biáº¿n trong vÃ­ dá»¥:\n\n\n* recordIndex: ( line 28 - line 25 + 1 ) = 4 \n* total: ( line 69 - line 62 + 1 ) = 8 \n* done :  ( line 70 - line 63 + 1 ) = 8\n* Live Time trung bÃ¬nh: ( 4 + 4+ 8 ) / 3 â‰ˆ 7\n\nNhÆ° Ä‘Ã£ tháº¥y, vÃ­ dá»¥ thá»© 2 tá»‘t hÆ¡n vÃ­ dá»¥ thá»© nháº¥t bá»Ÿi khá»Ÿi táº¡o biáº¿n Ä‘Æ°á»£c biá»ƒu diá»…n gáº§n nhau á»Ÿ nÆ¡i biáº¿n Ä‘Æ°á»£c sá»­ dá»¥ng. Sá»± khÃ¡c nhau cá»§a hai live time trung bÃ¬nh tháº­t sá»± ráº¥t Ä‘Ã¡ng chÃº Ã½: 54 vÃ  7\n\nMá»™t con sá»‘ lÃ m nÃªn sá»± khÃ¡c biá»‡t code tá»‘t vÃ  khÃ´ng tá»‘t? Máº·c dÃ¹ cÃ¡c nhÃ  nghiÃªn cá»©u chÆ°a cÃ³ con sá»‘ nÃ o chÃ­nh xÃ¡c nhÆ°ng hoÃ n toÃ n cÃ³ thá»ƒ tin ráº±ng: live time vá»›i span cÃ ng nhá» thÃ¬ cÃ ng tá»‘t.\n\nNáº¿u báº¡n thá»­ cÃ³ Ã¡p dá»¥ng khÃ¡i niá»‡m span vÃ  live time vÃ o biáº¿n toÃ n cá»¥c thÃ¬ báº¡n sáº½ Ä‘Æ°á»£c con sá»‘ ráº¥t lá»›n, Ä‘Ã¢y lÃ  má»™t trong nhiá»u lÃ­ do ta nÃªn trÃ¡nh dÃ¹ng biáº¿n toÃ n cá»¥c khi cÃ³ thá»ƒ dÃ¹ng biáº¿n cá»¥c bá»™.\n\n#Má»™t sá»‘ thá»§ thuáº­t lÃ m nhá» \"Ä‘á»‹a bÃ n\" cá»§a biáº¿n\n\nÄÃ¢y lÃ  má»™t sá»‘ thá»§ thuáº­t Ä‘áº·c biá»‡t Ä‘á»ƒ giÃºp báº¡n thu gá»n táº§m hoáº¡t Ä‘á»™ng cá»§a biáº¿n láº¡i:\n\n**Khá»Ÿi táº¡o biáº¿n Ä‘Æ°á»£c dÃ¹ng trong vÃ²ng láº·p ngay trÆ°á»›c vÃ²ng láº·p Ä‘Ã³ chá»© Ä‘á»«ng Ä‘áº·t á»Ÿ Ä‘áº§u hÃ m chá»©a vÃ²ng láº·p Ä‘Ã³**. Viá»‡c nÃ y sáº½ cÃ³ Ã­ch khi báº¡n sá»­a Ä‘á»•i vÃ²ng láº·p, báº¡n sáº½ nhá»› pháº£i thay Ä‘á»•i cáº£ cÃ¡c khá»Ÿi táº¡o vÃ²ng láº·p. \n\n**Chá»‰ gÃ¡n giÃ¡ trá»‹ cho biáº¿n khi nÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng.**  Náº¿u gÃ¡n bá»«a bÃ£i sau nÃ y báº¡n sáº½ gáº·p khÃ³ khÄƒn khi Ä‘á»c code.\n\n**NhÃ³m nhá»¯ng cÃ¢u lá»‡nh liÃªn quan láº¡i vá»›i nhau**. CÃ¡c vÃ­ dá»¥ sau sáº½ minh hoáº¡ viá»‡c nhÃ³m cÃ¡c tham chiáº¿u Ä‘áº¿n cÃ¡c biáº¿n láº¡i vá»›i nhau lÃ m cho chÃºng dá»… tÃ¬m tháº¥y hÆ¡n. Äáº§u tiÃªn lÃ  vÃ­ dá»¥ cá»§a viá»‡c vi pháº¡m nguyÃªn táº¯c nÃ y:\n\n```c\nvoid SummarizeData(...) {\n   ...\n   GetOldData( oldData, &numOldData );      **<-- 1**\n   GetNewData( newData, &numNewData );         |\n   totalOldData = Sum( oldData, numOldData );  |\n   totalNewData = Sum( newData, numNewData );  |\n   PrintOldDataSummary( oldData, totalOldData, numOldData );\n   PrintNewDataSummary( newData, totalNewData, numNewData );\n   SaveOldDataSummary( totalOldData, numOldData );\n   SaveNewDataSummary( totalNewData, numNewData );       **<-- 1**\n   ...\n}\n\n(1)CÃ¡c cÃ¢u lá»‡nh sá»­ dá»¥ng 2 táº­p há»£p biáº¿n\n```\nTrong vÃ­ dá»¥ nÃ y, báº¡n nÃ©m cÃ¡c biáº¿n oldData, newData, numOldData, numNewData, totalOldData vÃ o má»™t block. VÃ­ dá»¥ sau sáº½ Ä‘á»ƒ 3 biáº¿n trong má»™t block:\n\n```c\nvoid SummarizeData( ... ) {\n   GetOldData( oldData, &numOldData );       <-- 1\n   totalOldData = Sum( oldData, numOldData );  |\n   PrintOldDataSummary( oldData, totalOldData, numOldData );\n   SaveOldDataSummary( totalOldData, numOldData );       <-- 1\n   ...\n   GetNewData( newData, &numNewData );       <-- 2\n   totalNewData = Sum( newData, numNewData );  |\n   PrintNewDataSummary( newData, totalNewData, numNewData );\n   SaveNewDataSummary( totalNewData, numNewData );       <-- 2\n   ...\n}\n\n(1)CÃ¡c cÃ¢u lá»‡nh sá»­ dá»¥ng oldData.\n\n(2)CÃ¡c cÃ¢u lá»‡nh sá»­ dá»¥ng newData.\n```\nKhi mÃ  code bá»‹ lá»—i thÃ¬ viá»‡c tÃ¡ch nhÆ° trÃªn sáº½ giÃºp ta sá»­a dá»… dÃ ng sá»­a lá»—i hÆ¡n vÃ  cáº£ khi báº¡n muá»‘n chia code nÃ y ra thÃ nh cÃ¡c hÃ m thÃ¬ rÃµ rÃ ng  cÃ¡ch viáº¿t thá»© hai nÃ y sáº½ tÃ¡ch nhanh hÆ¡n cÃ¡ch thá»© nháº¥t.\n\n**PhÃ¡ nhá»¯ng nhÃ³m cÃ¢u lá»‡nh cÃ³ liÃªn quan Ä‘á»ƒ Ä‘Æ°a vÃ o cÃ¡c hÃ m riÃªng**. Má»™t biáº¿n trong má»™t hÃ m sáº½ cÃ³ khuynh hÆ°á»›ng lÃ m span vÃ  live time nhá» hÆ¡n. Báº±ng cÃ¡ch phÃ¡ nhÃ³m cÃ¢u lá»‡nh ra nhÆ° váº­y báº¡n lÃ m dáº£m \"Ä‘á»‹a bÃ n hoáº¡t Ä‘á»™ng\" cá»§a cÃ¡c biáº¿n ráº¥t nhiá»u.\n\n**Báº¯t Ä‘áº§u vá»›i pháº¡m vi nhá» nháº¥t cÃ³ thá»ƒ, chá»‰ má»Ÿ rá»™ng khi nÃ o tháº­t cáº§n thiáº¿t.** Viá»‡c thu nhá» pháº¡m vi má»™t biáº¿n Ä‘Ã£ Ä‘Æ°á»£c má»Ÿ rá»™ng thÃ¬ khÃ³ hÆ¡n ráº¥t nhiá»u viá»‡c má»Ÿ rá»™ng pháº¡m vi cá»§a biáº¿n Ä‘ang cÃ³ pháº¡m vi nhá», Ä‘Æ°a má»™t biáº¿n toÃ n cá»¥c thÃ nh má»™t biáº¿n class thÃ¬ Ä‘Æ°Æ¡ng nhiÃªn sáº½ khÃ³ hÆ¡n ráº¥t nhiá»u vá»›i viá»‡c Ä‘Æ°a biáº¿n class thÃ nh biáº¿n toÃ n cá»¥c. Vá»›i lÃ­ do Ä‘Ã³, hÃ£y Æ°u tiÃªn cho pháº¡m vi nhá» nháº¥t cÃ³ thá»ƒ: má»™t biáº¿n cá»¥c bá»™ cho má»—i vÃ²ng láº·p, má»™t biáº¿n cá»¥c bá»™ cho má»™t hÃ m, rá»“i biáº¿n private cho class, rá»“i Ä‘áº¿n biáº¿n protected, rá»“i package( náº¿u ngÃ´n ngá»¯ cá»§a báº¡n há»— trá»£ nÃ³), vÃ  táº¥t nhiÃªn biáº¿n toÃ n cá»¥c lÃ  phÆ°Æ¡ng Ã¡n cuá»‘i cÃ¹ng!\n\n\nÄá»‘i vá»›i nhiá»u láº­p trÃ¬nh viÃªn, viá»‡c thu nhá» pháº¡m vi biáº¿n hay khÃ´ng cÃ²n phá»¥ thuá»™c vÃ o  quan Ä‘iá»ƒm cá»§a há» vá» \"sá»± tiá»‡n lá»£i\" vÃ  \"sá»± dá»… quáº£n lÃ­\". Má»™t sá»‘ láº­p trÃ¬nh viÃªn dÃ¹ng ráº¥t nhiá»u biáº¿n toÃ n cá»¥c vÃ¬ nÃ³ cÃ³ thá»ƒ truy cáº­p tá»« báº¥t cá»© Ä‘Ã¢u mÃ  khÃ´ng bá»‹ máº¥y cÃ¡i quy Ä‘á»‹nh vá» pháº¡m vi biáº¿n lÃ m phiá»n. Trong suy nghÄ© cá»§a há», sá»± tiá»‡n lá»£i Ä‘Ã³ quan trá»ng hÆ¡n cáº£ nhá»¯ng rá»§i ro cá»±c kÃ¬ ráº¯c rá»‘i.\n\nNhá»¯ng láº­p trÃ¬nh viÃªn khÃ¡c thÃ¬ thÃ­ch giá»¯ cÃ¡c biáº¿n cÃ ng cá»¥c bá»™ cÃ ng tá»‘t bá»Ÿi vÃ¬ nÃ³ giÃºp cho code dá»… quáº£n lÃ­ hÆ¡n. CÃ ng áº©n Ä‘i nhiá»u thÃ´ng tin thÃ¬ báº¡n cÃ ng dá»… táº­p trung hÆ¡n vÃ o má»™t thá»© trong má»™t thá»i Ä‘iá»ƒm. NhÆ° tháº¿ cÃ³ thá»ƒ giÃºp báº¡n trÃ¡nh nhá»¯ng lá»—i do báº¡n quÃªn máº¥t má»™t trong sá»‘ hÃ ng tÃ¡ thÃ´ng tin mÃ  báº¡n pháº£i nhá»› cÃ¹ng lÃºc.\n\nSá»± khÃ¡c biá»‡t giá»¯a triáº¿t lÃ­ \"thuáº­n tiá»‡n\" vÃ  triáº¿t lÃ­ \"dá»… quáº£n lÃ­\" nháº¥n máº¡nh sá»± khÃ¡c nhau trong viáº¿t vÃ  Ä‘á»c chÆ°Æ¡ng trÃ¬nh. Má»Ÿ rá»™ng háº¿t má»©c pháº¡m vi biáº¿n cÃ³ thá»ƒ lÃ m cho viá»‡c viáº¿t chÆ°Æ¡ng trÃ¬nh dá»… hÆ¡n nhiá»u nhÆ°ng má»™t chÆ°Æ¡ng trÃ¬nh mÃ  má»™t hÃ m cÅ©ng cÃ³ thá»ƒ gá»i cÃ¡c biáº¿n tá»« báº¥t kÃ¬ Ä‘Ã¢u sáº½ ráº¥t khÃ³ Ä‘á»ƒ tÃ¬m ra Ä‘Ã¢u lÃ  yáº¿u tá»‘ mÃ  nhá»¯ng hÃ m Ä‘Ã³ tháº­t sá»± sá»­ dá»¥ng. Trong má»™t chÆ°Æ¡ng trÃ¬nh nhÆ° tháº¿, báº¡n khÃ´ng thá»ƒ hiá»ƒu chá»‰ má»™t hÃ m mÃ  pháº£i hiá»ƒu toÃ n bá»™ chÆ°Æ¡ng trÃ¬nh. Má»™t chÆ°Æ¡ng trÃ¬nh nhÆ° váº­y thÃ¬ ráº¥t khÃ³ Ä‘á»c, ráº¥t khÃ³ Debug, cÅ©ng nhÆ° ráº¥t khÃ³ Ä‘á»ƒ chá»‰nh sá»­a.\n\nTÃ³m láº¡i, báº¡n nÃªn khai bÃ¡o/sá»­ dá»¥ng má»—i biáº¿n lÃ m sao cho nÃ³ Ä‘Æ°á»£c nhÃ¬n tháº¥y trong Ä‘oáº¡n code nhá» nháº¥t cÃ³ thá»ƒ. Rá»“i báº¡n sáº½ nháº­n ra ráº±ng báº¡n ráº¥t hiáº¿m khi  báº¡n sá»­ dá»¥ng má»™t biáº¿n toÃ n cá»¥c má»™t cÃ¡ch Ä‘Æ¡n thuáº§n :blush: \n\n-----------\n\n\nBÃ i viáº¿t cÃ³ tham kháº£o má»™t sá»‘ ná»™i dung trong cuá»‘n Code Complete vÃ  cÃ¡c tÃ i liá»‡u khÃ¡c :blush: \n\n\n------------\nPart 1 á»Ÿ Ä‘Ã¢y: http://daynhauhoc.com/t/lam-sao-de-su-dung-bien-hieu-qua-hon-part1/6921\nPart3 á»Ÿ Ä‘Ã¢y:  http://daynhauhoc.com/t/lam-sao-de-su-dung-bien-hieu-qua-hon-part3/6992\nPart4 á»Ÿ Ä‘Ã¢y: http://daynhauhoc.com/t/lam-sao-de-su-dung-bien-hieu-qua-hon-part-4/7063\n  [1]: http://daynhauhoc.com/t/lam-sao-de-su-dung-bien-hieu-qua-hon-part1/6921\n","__filename":"posts/6936.md","__url":"/lam-sao-de-su-dung-bien-hieu-qua-hon-part2/","__resourceUrl":"/lam-sao-de-su-dung-bien-hieu-qua-hon-part2/index.html","__dataUrl":"/lam-sao-de-su-dung-bien-hieu-qua-hon-part2/index.html.2d7df1ca1942bbcdab5bfcc73306f9c0.json"}